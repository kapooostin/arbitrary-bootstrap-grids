/*!
 * Bootstrap Customizer (http://getbootstrap.com/customize/)
 * Copyright 2011-2014 Twitter, Inc.
 *
 * Licensed under the Creative Commons Attribution 3.0 Unported License. For
 * details, see http://creativecommons.org/licenses/by/3.0/.
 */
window.onload=function(){"use strict";function t(t,e){throw $('<div id="bsCustomizerAlert" class="bs-customizer-alert"><div class="container"><a href="#bsCustomizerAlert" data-dismiss="alert" class="close pull-right">&times;</a><p class="bs-customizer-alert-text"><span class="glyphicon glyphicon-warning-sign"></span>'+t+"</p>"+(e.extract?'<pre class="bs-customizer-alert-extract">'+e.extract.join("\n")+"</pre>":"")+"</div></div>").appendTo("body").alert(),e}function e(t){$('<div class="bs-callout bs-callout-info"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+t+"</div>").insertAfter(".bs-customize-download")}function n(t,e){var n=$('<div class="bs-callout bs-callout-danger"><h4>Attention!</h4><p>'+t+"</p></div>");e?n.appendTo(".bs-docs-container"):n.insertAfter(".bs-customize-download")}function s(t){t=t.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var e=location.search.match(new RegExp("[?&]"+t+"=([^&]+)(&|$)"));return e&&decodeURIComponent(e[1].replace(/\+/g," "))}function r(n,s){var r={description:"Bootstrap Customizer Config","public":!0,files:{"config.json":{content:n}}};$.ajax({url:"https://api.github.com/gists",type:"POST",dataType:"json",data:JSON.stringify(r)}).success(function(t){var n=t.html_url,r=window.location.protocol+"//"+window.location.host,o=r+window.location.pathname+"?id="+t.id;e('<strong>Success!</strong> Your configuration has been saved to <a href="'+n+'">'+n+'</a> and can be revisited here at <a href="'+o+'">'+o+"</a> for further customization."),history.replaceState(!1,document.title,o),s(n,o)}).error(function(e){try{t("<strong>Ruh roh!</strong> Could not save gist file, configuration not saved.",e)}catch(n){}s("<none>","<none>")})}function o(){var t={};$("#less-variables-section input").each(function(){$(this).val()&&(t[$(this).prev().text()]=$(this).val())});var e={vars:t,css:$("#less-section input:checked").map(function(){return this.value}).toArray(),js:$("#plugin-section input:checked").map(function(){return this.value}).toArray()};if(!$.isEmptyObject(e.vars)||e.css.length||e.js.length)return e}function i(){var e=s("id");e&&$.ajax({url:"https://api.github.com/gists/"+e,type:"GET",dataType:"json"}).success(function(t){var e=JSON.parse(t.files["config.json"].content);if(e.js&&$("#plugin-section input").each(function(){$(this).prop("checked",~$.inArray(this.value,e.js))}),e.css&&$("#less-section input").each(function(){$(this).prop("checked",~$.inArray(this.value,e.css))}),e.vars)for(var n in e.vars)$('input[data-var="'+n+'"]').val(e.vars[n])}).error(function(e){t("Error fetching bootstrap config file",e)})}function a(e,n,s,r,o){if(!e&&!n)return t("<strong>Ruh roh!</strong> No Bootstrap files selected.",new Error("no Bootstrap"));var i=new JSZip;if(e){var a=i.folder("css");for(var c in e)a.file(c,e[c])}if(n){var l=i.folder("js");for(var u in n)l.file(u,n[u])}if(s){var p=i.folder("fonts");for(var f in s)p.file(f,s[f],{base64:!0})}r&&i.file("config.json",r);var d=i.generate({type:"blob"});o(d)}function c(t){var e="";for(var n in t)e+=n+": "+t[n]+";\n";return e+"\n\n"}function l(){var t=$('#less-section [value="glyphicons.less"]:checked');return t.length?__fonts:void 0}function u(t){var e=/^@import \"(.*?)\";$/,n=__less[t].split("\n"),s=[];return $.each(n,function(t,n){var r=e.exec(n);if(r){var o=r[1],i=u(o);$.each(i,function(t,e){-1===$.inArray(e,s)&&s.push(e)}),s.push(o)}}),s}function p(t,e,n){var s=__less[t],r=u(t);return $.each(r,function(t,r){var o=e[r];(o||null==o)&&(s+=__less[r]),"variables.less"===r&&n&&(s+=c(n))}),s=s.replace(/@import[^\n]*/gi,"")}function f(e,n,s){var r=new less.Parser({paths:["variables.less","mixins.less"],optimization:0,filename:n+".css"});r.parse(e,function(e,r){return e?t("<strong>Ruh roh!</strong> Could not parse less files.",e):(s[n+".css"]=g+r.toCSS(),s[n+".min.css"]=g+r.toCSS({compress:!0}),void 0)})}function d(e){var n=!1,s={};if($("#less-section input").each(function(){var t=$(this),e=t.is(":checked");s[t.val()]=e,n=n||e}),!n)return!1;var r={},o={};$("#less-variables-section input").each(function(){$(this).val()&&(o[$(this).prev().text()]=$(this).val())});var i=e+p("bootstrap.less",s,o),a=e+p("theme.less",s,o);try{f(i,"bootstrap",r),f(a,"bootstrap-theme",r)}catch(c){return t("<strong>Ruh roh!</strong> Could not parse less files.",c)}return r}function h(t){var e=UglifyJS.parse(t);e.figure_out_scope();var n=UglifyJS.Compressor(),s=e.transform(n);s.figure_out_scope(),s.compute_char_frequency(),s.mangle_names();var r=UglifyJS.OutputStream();return s.print(r),r.toString()}function v(t){var e=$("#plugin-section input:checked"),n='if (typeof jQuery === "undefined") { throw new Error("Bootstrap\'s JavaScript requires jQuery") }\n\n';if(!e.length)return!1;var s=e.map(function(){return __js[this.value]}).toArray().join("\n");return t=g+t,s=n+s,{"bootstrap.js":t+s,"bootstrap.min.js":t+h(s)}}var g="/*!\n * Bootstrap v3.2.0 (http://getbootstrap.com)\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n\n",b=$("#less-section input"),m=$("#plugin-section input"),y=$("#less-variables-section input");$("#less-section .toggle").on("click",function(t){t.preventDefault(),b.prop("checked",!b.is(":checked"))}),$("#plugin-section .toggle").on("click",function(t){t.preventDefault(),m.prop("checked",!m.is(":checked"))}),$("#less-variables-section .toggle").on("click",function(t){t.preventDefault(),y.val("")}),$("[data-dependencies]").on("click",function(){if($(this).is(":checked")){var t=this.getAttribute("data-dependencies");if(t){t=t.split(",");for(var e=0;e<t.length;e++){var n=$('[value="'+t[e]+'"]');n&&n.prop("checked",!0)}}}}),$("[data-dependents]").on("click",function(){if(!$(this).is(":checked")){var t=this.getAttribute("data-dependents");if(t){t=t.split(",");for(var e=0;e<t.length;e++){var n=$('[value="'+t[e]+'"]');n&&n.prop("checked",!1)}}}});var w=$("#btn-compile");w.on("click",function(t){var e=o(),n=JSON.stringify(e,null,2);t.preventDefault(),w.attr("disabled","disabled"),r(n,function(t,s){e.customizerUrl=s,n=JSON.stringify(e,null,2);var r="/*!\n * Generated using the Bootstrap Customizer ("+s+")\n * Config saved to config.json and "+t+"\n */\n";a(d(r),v(r),l(),n,function(t){w.removeAttr("disabled"),saveAs(t,"bootstrap.zip")})})}),function(){function t(){$(".bs-docs-section, .bs-docs-sidebar").css("display","none"),n('Looks like your current browser doesn\'t support the Bootstrap Customizer. Please take a second to <a href="http://browsehappy.com/">upgrade to a more modern browser</a> (other than Safari).',!0)}var e=window.webkitURL||window.URL,s=new Blob(["<svg xmlns='http://www.w3.org/2000/svg'></svg>"],{type:"image/svg+xml;charset=utf-8"}),r=e.createObjectURL(s);null===/^blob:/.exec(r)?t():$("<img>").on("load",function(){w.prop("disabled",!1)}).on("error",t).attr("src",r)}(),i()};