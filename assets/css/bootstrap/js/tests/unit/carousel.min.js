$(function(){"use strict";module("carousel plugin"),test("should be defined on jQuery object",function(){ok($(document.body).carousel,"carousel method is defined")}),module("carousel",{setup:function(){$.fn.bootstrapCarousel=$.fn.carousel.noConflict()},teardown:function(){$.fn.carousel=$.fn.bootstrapCarousel,delete $.fn.bootstrapCarousel}}),test("should provide no conflict",function(){ok(!$.fn.carousel,"carousel was set back to undefined (orig value)")}),test("should return element",function(){ok($(document.body).bootstrapCarousel()[0]==document.body,"document.body returned")}),test("should not fire slide when slide is prevented",function(){$.support.transition=!1,stop(),$('<div class="carousel"/>').on("slide.bs.carousel",function(i){i.preventDefault(),ok(!0),start()}).on("slid.bs.carousel",function(){ok(!1)}).bootstrapCarousel("next")}),test("should reset when slide is prevented",function(){var i='<div id="carousel-example-generic" class="carousel slide"><ol class="carousel-indicators"><li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li><li data-target="#carousel-example-generic" data-slide-to="1"></li><li data-target="#carousel-example-generic" data-slide-to="2"></li></ol><div class="carousel-inner"><div class="item active"><div class="carousel-caption"></div></div><div class="item"><div class="carousel-caption"></div></div><div class="item"><div class="carousel-caption"></div></div></div><a class="left carousel-control" href="#carousel-example-generic" data-slide="prev"></a><a class="right carousel-control" href="#carousel-example-generic" data-slide="next"></a></div>',a=$(i);$.support.transition=!1,stop(),a.one("slide.bs.carousel",function(i){i.preventDefault(),setTimeout(function(){ok(a.find(".item:eq(0)").is(".active")),ok(a.find(".carousel-indicators li:eq(0)").is(".active")),a.bootstrapCarousel("next")},1)}),a.one("slid.bs.carousel",function(){setTimeout(function(){ok(a.find(".item:eq(1)").is(".active")),ok(a.find(".carousel-indicators li:eq(1)").is(".active")),start()},1)}),a.bootstrapCarousel("next")}),test("should fire slide event with direction",function(){var i='<div id="myCarousel" class="carousel slide"><div class="carousel-inner"><div class="item active"><img alt=""><div class="carousel-caption"><h4>{{_i}}First Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Second Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Third Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div></div><a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a><a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a></div>';$.support.transition=!1,stop(),$(i).on("slide.bs.carousel",function(i){i.preventDefault(),ok(i.direction),ok("right"===i.direction||"left"===i.direction),start()}).bootstrapCarousel("next")}),test("should fire slid event with direction",function(){var i='<div id="myCarousel" class="carousel slide"><div class="carousel-inner"><div class="item active"><img alt=""><div class="carousel-caption"><h4>{{_i}}First Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Second Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Third Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div></div><a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a><a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a></div>';$.support.transition=!1,stop(),$(i).on("slid.bs.carousel",function(i){i.preventDefault(),ok(i.direction),ok("right"===i.direction||"left"===i.direction),start()}).bootstrapCarousel("next")}),test("should fire slide event with relatedTarget",function(){var i='<div id="myCarousel" class="carousel slide"><div class="carousel-inner"><div class="item active"><img alt=""><div class="carousel-caption"><h4>{{_i}}First Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Second Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Third Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div></div><a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a><a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a></div>';$.support.transition=!1,stop(),$(i).on("slide.bs.carousel",function(i){i.preventDefault(),ok(i.relatedTarget),ok($(i.relatedTarget).hasClass("item")),start()}).bootstrapCarousel("next")}),test("should fire slid event with relatedTarget",function(){var i='<div id="myCarousel" class="carousel slide"><div class="carousel-inner"><div class="item active"><img alt=""><div class="carousel-caption"><h4>{{_i}}First Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Second Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div><div class="item"><img alt=""><div class="carousel-caption"><h4>{{_i}}Third Thumbnail label{{/i}}</h4><p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p></div></div></div><a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a><a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a></div>';$.support.transition=!1,stop(),$(i).on("slid.bs.carousel",function(i){i.preventDefault(),ok(i.relatedTarget),ok($(i.relatedTarget).hasClass("item")),start()}).bootstrapCarousel("next")}),test("should set interval from data attribute",4,function(){var i=$('<div id="myCarousel" class="carousel slide"> <div class="carousel-inner"> <div class="item active"> <img alt=""> <div class="carousel-caption"> <h4>{{_i}}First Thumbnail label{{/i}}</h4> <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> </div> </div> <div class="item"> <img alt=""> <div class="carousel-caption"> <h4>{{_i}}Second Thumbnail label{{/i}}</h4> <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> </div> </div> <div class="item"> <img alt=""> <div class="carousel-caption"> <h4>{{_i}}Third Thumbnail label{{/i}}</h4> <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> </div> </div> </div> <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a> <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a> </div>');i.attr("data-interval",1814),i.appendTo("body"),$("[data-slide]").first().click(),ok(1814==$("#myCarousel").data("bs.carousel").options.interval),$("#myCarousel").remove(),i.appendTo("body").attr("data-modal","foobar"),$("[data-slide]").first().click(),ok(1814==$("#myCarousel").data("bs.carousel").options.interval,"even if there is an data-modal attribute set"),$("#myCarousel").remove(),i.appendTo("body"),$("[data-slide]").first().click(),$("#myCarousel").attr("data-interval",1860),$("[data-slide]").first().click(),ok(1814==$("#myCarousel").data("bs.carousel").options.interval,"attributes should be read only on initialization"),$("#myCarousel").remove(),i.attr("data-interval",!1),i.appendTo("body"),$("#myCarousel").bootstrapCarousel(1),ok($("#myCarousel").data("bs.carousel").options.interval===!1,"data attribute has higher priority than default options"),$("#myCarousel").remove()}),test("should skip over non-items",function(){$.support.transition=!1;var i=$('<div id="myCarousel" class="carousel" data-interval="1814"><div class="carousel-inner"><div class="item active"><img alt=""></div><script type="text/x-metamorph" id="thingy"></script><div class="item"><img alt=""></div><div class="item"></div></div></div>');i.bootstrapCarousel(),equal(i.find(".item")[0],i.find(".active")[0],"the first carousel item should be active"),i.bootstrapCarousel(1),equal(i.find(".item")[1],i.find(".active")[0],"the second carousel item should be active")})});