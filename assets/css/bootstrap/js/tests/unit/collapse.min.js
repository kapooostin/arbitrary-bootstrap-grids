$(function(){"use strict";module("collapse plugin"),test("should be defined on jquery object",function(){ok($(document.body).collapse,"collapse method is defined")}),module("collapse",{setup:function(){$.fn.bootstrapCollapse=$.fn.collapse.noConflict()},teardown:function(){$.fn.collapse=$.fn.bootstrapCollapse,delete $.fn.bootstrapCollapse}}),test("should provide no conflict",function(){ok(!$.fn.collapse,"collapse was set back to undefined (org value)")}),test("should return element",function(){ok($(document.body).bootstrapCollapse()[0]==document.body,"document.body returned")}),test("should show a collapsed element",function(){var o=$('<div class="collapse"></div>').bootstrapCollapse("show");ok(o.hasClass("in"),"has class in"),ok(!/height/.test(o.attr("style")),"has height reset")}),test("should hide a collapsed element",function(){var o=$('<div class="collapse"></div>').bootstrapCollapse("hide");ok(!o.hasClass("in"),"does not have class in"),ok(/height/.test(o.attr("style")),"has height set")}),test("should not fire shown when show is prevented",function(){$.support.transition=!1,stop(),$('<div class="collapse"/>').on("show.bs.collapse",function(o){o.preventDefault(),ok(!0),start()}).on("shown.bs.collapse",function(){ok(!1)}).bootstrapCollapse("show")}),test("should reset style to auto after finishing opening collapse",function(){$.support.transition=!1,stop(),$('<div class="collapse" style="height: 0px"/>').on("show.bs.collapse",function(){ok("0px"==this.style.height)}).on("shown.bs.collapse",function(){ok(""===this.style.height),start()}).bootstrapCollapse("show")}),test("should add active class to target when collapse shown",function(){$.support.transition=!1,stop();var o=$('<a data-toggle="collapse" href="#test1"></a>').appendTo($("#qunit-fixture"));$('<div id="test1"></div>').appendTo($("#qunit-fixture")).on("show.bs.collapse",function(){ok(!o.hasClass("collapsed")),start()}),o.click()}),test("should remove active class to target when collapse hidden",function(){$.support.transition=!1,stop();var o=$('<a data-toggle="collapse" href="#test1"></a>').appendTo($("#qunit-fixture"));$('<div id="test1" class="in"></div>').appendTo($("#qunit-fixture")).on("hide.bs.collapse",function(){ok(o.hasClass("collapsed")),start()}),o.click()}),test("should remove active class from inactive accordion targets",function(){$.support.transition=!1,stop();var o=$('<div id="accordion"><div class="accordion-group"></div><div class="accordion-group"></div><div class="accordion-group"></div></div>').appendTo($("#qunit-fixture")),a=$('<a data-toggle="collapse" href="#body1" data-parent="#accordion"></a>').appendTo(o.find(".accordion-group").eq(0));$('<div id="body1" class="in"></div>').appendTo(o.find(".accordion-group").eq(0));var s=$('<a class="collapsed" data-toggle="collapse" href="#body2" data-parent="#accordion"></a>').appendTo(o.find(".accordion-group").eq(1));$('<div id="body2"></div>').appendTo(o.find(".accordion-group").eq(1));var e=$('<a class="collapsed" data-toggle="collapse" href="#body3" data-parent="#accordion"></a>').appendTo(o.find(".accordion-group").eq(2));$('<div id="body3"></div>').appendTo(o.find(".accordion-group").eq(2)).on("show.bs.collapse",function(){ok(a.hasClass("collapsed")),ok(s.hasClass("collapsed")),ok(!e.hasClass("collapsed")),start()}),e.click()}),test("should allow dots in data-parent",function(){$.support.transition=!1,stop();var o=$('<div class="accordion"><div class="accordion-group"></div><div class="accordion-group"></div><div class="accordion-group"></div></div>').appendTo($("#qunit-fixture")),a=$('<a data-toggle="collapse" href="#body1" data-parent=".accordion"></a>').appendTo(o.find(".accordion-group").eq(0));$('<div id="body1" class="in"></div>').appendTo(o.find(".accordion-group").eq(0));var s=$('<a class="collapsed" data-toggle="collapse" href="#body2" data-parent=".accordion"></a>').appendTo(o.find(".accordion-group").eq(1));$('<div id="body2"></div>').appendTo(o.find(".accordion-group").eq(1));var e=$('<a class="collapsed" data-toggle="collapse" href="#body3" data-parent=".accordion"></a>').appendTo(o.find(".accordion-group").eq(2));$('<div id="body3"></div>').appendTo(o.find(".accordion-group").eq(2)).on("show.bs.collapse",function(){ok(a.hasClass("collapsed")),ok(s.hasClass("collapsed")),ok(!e.hasClass("collapsed")),start()}),e.click()})});