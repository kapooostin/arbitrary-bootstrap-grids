$(function(){"use strict";module("popover plugin"),test("should be defined on jquery object",function(){var o=$("<div></div>");ok(o.popover,"popover method is defined")}),module("popover",{setup:function(){$.fn.bootstrapPopover=$.fn.popover.noConflict()},teardown:function(){$.fn.popover=$.fn.bootstrapPopover,delete $.fn.bootstrapPopover}}),test("should provide no conflict",function(){ok(!$.fn.popover,"popover was set back to undefined (org value)")}),test("should return element",function(){var o=$("<div></div>");ok(o.bootstrapPopover()==o,"document.body returned")}),test("should render popover element",function(){$.support.transition=!1;var o=$('<a href="#" title="mdo" data-content="http://twitter.com/mdo">@mdo</a>').appendTo("#qunit-fixture").bootstrapPopover("show");ok($(".popover").length,"popover was inserted"),o.bootstrapPopover("hide"),ok(!$(".popover").length,"popover removed")}),test("should store popover instance in popover data object",function(){$.support.transition=!1;var o=$('<a href="#" title="mdo" data-content="http://twitter.com/mdo">@mdo</a>').bootstrapPopover();ok(!!o.data("bs.popover"),"popover instance exists")}),test("should store popover trigger in popover instance data object",function(){$.support.transition=!1;var o=$('<a href="#" title="ResentedHook">@ResentedHook</a>').appendTo("#qunit-fixture").bootstrapPopover();o.bootstrapPopover("show"),ok(!!$(".popover").data("bs.popover"),"popover trigger stored in instance data"),$("#qunit-fixture").empty()}),test("should get title and content from options",function(){$.support.transition=!1;var o=$('<a href="#">@fat</a>').appendTo("#qunit-fixture").bootstrapPopover({title:function(){return"@fat"},content:function(){return"loves writing tests （╯°□°）╯︵ ┻━┻"}});o.bootstrapPopover("show"),ok($(".popover").length,"popover was inserted"),equal($(".popover .popover-title").text(),"@fat","title correctly inserted"),equal($(".popover .popover-content").text(),"loves writing tests （╯°□°）╯︵ ┻━┻","content correctly inserted"),o.bootstrapPopover("hide"),ok(!$(".popover").length,"popover was removed"),$("#qunit-fixture").empty()}),test("should not duplicate HTML object",function(){$.support.transition=!1;var o=$("<div>").html("loves writing tests （╯°□°）╯︵ ┻━┻"),t=$('<a href="#">@fat</a>').appendTo("#qunit-fixture").bootstrapPopover({content:function(){return o}});t.bootstrapPopover("show"),ok($(".popover").length,"popover was inserted"),equal($(".popover .popover-content").html(),o,"content correctly inserted"),t.bootstrapPopover("hide"),ok(!$(".popover").length,"popover was removed"),t.bootstrapPopover("show"),ok($(".popover").length,"popover was inserted"),equal($(".popover .popover-content").html(),o,"content correctly inserted"),t.bootstrapPopover("hide"),ok(!$(".popover").length,"popover was removed"),$("#qunit-fixture").empty()}),test("should get title and content from attributes",function(){$.support.transition=!1;var o=$('<a href="#" title="@mdo" data-content="loves data attributes (づ｡◕‿‿◕｡)づ ︵ ┻━┻" >@mdo</a>').appendTo("#qunit-fixture").bootstrapPopover().bootstrapPopover("show");ok($(".popover").length,"popover was inserted"),equal($(".popover .popover-title").text(),"@mdo","title correctly inserted"),equal($(".popover .popover-content").text(),"loves data attributes (づ｡◕‿‿◕｡)づ ︵ ┻━┻","content correctly inserted"),o.bootstrapPopover("hide"),ok(!$(".popover").length,"popover was removed"),$("#qunit-fixture").empty()}),test("should get title and content from attributes #2",function(){$.support.transition=!1;var o=$('<a href="#" title="@mdo" data-content="loves data attributes (づ｡◕‿‿◕｡)づ ︵ ┻━┻" >@mdo</a>').appendTo("#qunit-fixture").bootstrapPopover({title:"ignored title option",content:"ignored content option"}).bootstrapPopover("show");ok($(".popover").length,"popover was inserted"),equal($(".popover .popover-title").text(),"@mdo","title correctly inserted"),equal($(".popover .popover-content").text(),"loves data attributes (づ｡◕‿‿◕｡)づ ︵ ┻━┻","content correctly inserted"),o.bootstrapPopover("hide"),ok(!$(".popover").length,"popover was removed"),$("#qunit-fixture").empty()}),test("should respect custom classes",function(){$.support.transition=!1;var o=$('<a href="#">@fat</a>').appendTo("#qunit-fixture").bootstrapPopover({title:"Test",content:"Test",template:'<div class="popover foobar"><div class="arrow"></div><div class="inner"><h3 class="title"></h3><div class="content"><p></p></div></div></div>'});o.bootstrapPopover("show"),ok($(".popover").length,"popover was inserted"),ok($(".popover").hasClass("foobar"),"custom class is present"),o.bootstrapPopover("hide"),ok(!$(".popover").length,"popover was removed"),$("#qunit-fixture").empty()}),test("should destroy popover",function(){var o=$("<div/>").bootstrapPopover({trigger:"hover"}).on("click.foo",function(){});ok(o.data("bs.popover"),"popover has data"),ok($._data(o[0],"events").mouseover&&$._data(o[0],"events").mouseout,"popover has hover event"),ok("foo"==$._data(o[0],"events").click[0].namespace,"popover has extra click.foo event"),o.bootstrapPopover("show"),o.bootstrapPopover("destroy"),ok(!o.hasClass("in"),"popover is hidden"),ok(!o.data("popover"),"popover does not have data"),ok("foo"==$._data(o[0],"events").click[0].namespace,"popover still has click.foo"),ok(!$._data(o[0],"events").mouseover&&!$._data(o[0],"events").mouseout,"popover does not have any events")})});